# Sector/Area Database - mapping sectors to coordinates
# This includes common sectors and areas in major Indian cities

SECTOR_DATA = {
    # Noida Sectors
    "sector_1": {"lat": 28.5921, "lon": 77.3635, "city": "Noida", "area": "Sector 1"},
    "sector_2": {"lat": 28.5860, "lon": 77.3637, "city": "Noida", "area": "Sector 2"},
    "sector_8": {"lat": 28.5641, "lon": 77.3758, "city": "Noida", "area": "Sector 8"},
    "sector_9": {"lat": 28.5580, "lon": 77.3783, "city": "Noida", "area": "Sector 9"},
    "sector_10": {"lat": 28.5517, "lon": 77.3805, "city": "Noida", "area": "Sector 10"},
    "sector_12": {"lat": 28.5393, "lon": 77.3848, "city": "Noida", "area": "Sector 12"},
    "sector_15": {"lat": 28.5171, "lon": 77.3938, "city": "Noida", "area": "Sector 15"},
    "sector_18": {"lat": 28.4978, "lon": 77.4070, "city": "Noida", "area": "Sector 18"},
    "sector_19": {"lat": 28.4918, "lon": 77.4093, "city": "Noida", "area": "Sector 19"},
    "sector_20": {"lat": 28.4856, "lon": 77.4115, "city": "Noida", "area": "Sector 20"},
    "sector_25": {"lat": 28.4554, "lon": 77.4281, "city": "Noida", "area": "Sector 25"},
    "sector_30": {"lat": 28.4220, "lon": 77.4494, "city": "Noida", "area": "Sector 30"},
    "sector_31": {"lat": 28.4156, "lon": 77.4527, "city": "Noida", "area": "Sector 31"},
    "sector_35": {"lat": 28.3851, "lon": 77.4723, "city": "Noida", "area": "Sector 35"},
    "sector_37": {"lat": 28.3739, "lon": 77.4805, "city": "Noida", "area": "Sector 37"},
    "sector_39": {"lat": 28.3613, "lon": 77.4889, "city": "Noida", "area": "Sector 39"},
    "sector_40": {"lat": 28.3550, "lon": 77.4930, "city": "Noida", "area": "Sector 40"},
    "sector_41": {"lat": 28.3486, "lon": 77.4970, "city": "Noida", "area": "Sector 41"},
    "sector_45": {"lat": 28.3191, "lon": 77.5187, "city": "Noida", "area": "Sector 45"},
    "sector_47": {"lat": 28.3064, "lon": 77.5281, "city": "Noida", "area": "Sector 47"},
    "sector_50": {"lat": 28.2880, "lon": 77.5446, "city": "Noida", "area": "Sector 50"},
    "sector_51": {"lat": 28.2816, "lon": 77.5487, "city": "Noida", "area": "Sector 51"},
    "sector_52": {"lat": 28.2752, "lon": 77.5527, "city": "Noida", "area": "Sector 52"},
    "sector_55": {"lat": 28.2568, "lon": 77.5686, "city": "Noida", "area": "Sector 55"},
    "sector_56": {"lat": 28.2504, "lon": 77.5726, "city": "Noida", "area": "Sector 56"},
    "sector_57": {"lat": 28.2439, "lon": 77.5766, "city": "Noida", "area": "Sector 57"},
    "sector_62": {"lat": 28.2134, "lon": 77.6025, "city": "Noida", "area": "Sector 62"},
    "sector_63": {"lat": 28.2069, "lon": 77.6065, "city": "Noida", "area": "Sector 63"},
    
    # Gurugram Sectors
    "gurgaon_1": {"lat": 28.4089, "lon": 77.0266, "city": "Gurugram", "area": "Sector 1"},
    "gurgaon_5": {"lat": 28.3842, "lon": 77.0647, "city": "Gurugram", "area": "Sector 5"},
    "gurgaon_7": {"lat": 28.3689, "lon": 77.0886, "city": "Gurugram", "area": "Sector 7"},
    "gurgaon_8": {"lat": 28.3618, "lon": 77.1014, "city": "Gurugram", "area": "Sector 8"},
    "gurgaon_9": {"lat": 28.3548, "lon": 77.1142, "city": "Gurugram", "area": "Sector 9"},
    "gurgaon_10": {"lat": 28.3477, "lon": 77.1270, "city": "Gurugram", "area": "Sector 10"},
    "gurgaon_14": {"lat": 28.3153, "lon": 77.1802, "city": "Gurugram", "area": "Sector 14"},
    "gurgaon_15": {"lat": 28.3082, "lon": 77.1930, "city": "Gurugram", "area": "Sector 15"},
    "gurgaon_17": {"lat": 28.2941, "lon": 77.2186, "city": "Gurugram", "area": "Sector 17"},
    "gurgaon_18": {"lat": 28.2870, "lon": 77.2314, "city": "Gurugram", "area": "Sector 18"},
    "gurgaon_21": {"lat": 28.2657, "lon": 77.2754, "city": "Gurugram", "area": "Sector 21"},
    "gurgaon_22": {"lat": 28.2588, "lon": 77.2882, "city": "Gurugram", "area": "Sector 22"},
    "gurgaon_23": {"lat": 28.2517, "lon": 77.3010, "city": "Gurugram", "area": "Sector 23"},
    "gurgaon_25": {"lat": 28.2374, "lon": 77.3266, "city": "Gurugram", "area": "Sector 25"},
    "gurgaon_31": {"lat": 28.1975, "lon": 77.4034, "city": "Gurugram", "area": "Sector 31"},
    "gurgaon_32": {"lat": 28.1905, "lon": 77.4162, "city": "Gurugram", "area": "Sector 32"},
    "gurgaon_39": {"lat": 28.1428, "lon": 77.5134, "city": "Gurugram", "area": "Sector 39"},
    "gurgaon_40": {"lat": 28.1357, "lon": 77.5262, "city": "Gurugram", "area": "Sector 40"},
    "gurgaon_45": {"lat": 28.1014, "lon": 77.5946, "city": "Gurugram", "area": "Sector 45"},
    "gurgaon_47": {"lat": 28.0872, "lon": 77.6202, "city": "Gurugram", "area": "Sector 47"},
    
    # Delhi Areas
    "delhi_cp": {"lat": 28.6296, "lon": 77.1946, "city": "Delhi", "area": "Connaught Place"},
    "delhi_mandi": {"lat": 28.6505, "lon": 77.2303, "city": "Delhi", "area": "Chandni Chowk"},
    "delhi_sadar": {"lat": 28.7041, "lon": 77.2064, "city": "Delhi", "area": "New Delhi"},
    "delhi_south": {"lat": 28.5244, "lon": 77.1855, "city": "Delhi", "area": "South Delhi"},
    "delhi_east": {"lat": 28.6076, "lon": 77.2500, "city": "Delhi", "area": "East Delhi"},
    "delhi_west": {"lat": 28.6295, "lon": 77.0553, "city": "Delhi", "area": "West Delhi"},
    "delhi_north": {"lat": 28.7589, "lon": 77.2295, "city": "Delhi", "area": "North Delhi"},
    
    # Bangalore Areas
    "bangalore_koramangala": {"lat": 12.9352, "lon": 77.6245, "city": "Bangalore", "area": "Koramangala"},
    "bangalore_indiranagar": {"lat": 12.9716, "lon": 77.6412, "city": "Bangalore", "area": "Indiranagar"},
    "bangalore_whitefield": {"lat": 12.9698, "lon": 77.7499, "city": "Bangalore", "area": "Whitefield"},
    "bangalore_mg": {"lat": 12.9716, "lon": 77.6245, "city": "Bangalore", "area": "MG Road"},
    "bangalore_jayanagar": {"lat": 12.9352, "lon": 77.5945, "city": "Bangalore", "area": "Jayanagar"},
    "bangalore_marathahalli": {"lat": 12.9598, "lon": 77.6997, "city": "Bangalore", "area": "Marathahalli"},
    
    # Mumbai Areas
    "mumbai_bandra": {"lat": 19.0596, "lon": 72.8295, "city": "Mumbai", "area": "Bandra"},
    "mumbai_andheri": {"lat": 19.1136, "lon": 72.8697, "city": "Mumbai", "area": "Andheri"},
    "mumbai_marinedrive": {"lat": 18.9435, "lon": 72.8236, "city": "Mumbai", "area": "Marine Drive"},
    "mumbai_fort": {"lat": 18.9406, "lon": 72.8355, "city": "Mumbai", "area": "Fort"},
    "mumbai_powai": {"lat": 19.1136, "lon": 72.9053, "city": "Mumbai", "area": "Powai"},
}

PINCODE_TO_SECTOR = {
    # Noida Pincodes
    "201301": {"area": "Sector 1", "city": "Noida", "lat": 28.5921, "lon": 77.3635},
    "201302": {"area": "Sector 2", "city": "Noida", "lat": 28.5860, "lon": 77.3637},
    "201308": {"area": "Sector 8", "city": "Noida", "lat": 28.5641, "lon": 77.3758},
    "201309": {"area": "Sector 9", "city": "Noida", "lat": 28.5580, "lon": 77.3783},
    "201310": {"area": "Sector 10", "city": "Noida", "lat": 28.5517, "lon": 77.3805},
    "201312": {"area": "Sector 12", "city": "Noida", "lat": 28.5393, "lon": 77.3848},
    "201315": {"area": "Sector 15", "city": "Noida", "lat": 28.5171, "lon": 77.3938},
    "201318": {"area": "Sector 18", "city": "Noida", "lat": 28.4978, "lon": 77.4070},
    "201319": {"area": "Sector 19", "city": "Noida", "lat": 28.4918, "lon": 77.4093},
    "201320": {"area": "Sector 20", "city": "Noida", "lat": 28.4856, "lon": 77.4115},
    "201325": {"area": "Sector 25", "city": "Noida", "lat": 28.4554, "lon": 77.4281},
    "201330": {"area": "Sector 30", "city": "Noida", "lat": 28.4220, "lon": 77.4494},
    "201331": {"area": "Sector 31", "city": "Noida", "lat": 28.4156, "lon": 77.4527},
    "201335": {"area": "Sector 35", "city": "Noida", "lat": 28.3851, "lon": 77.4723},
    "201337": {"area": "Sector 37", "city": "Noida", "lat": 28.3739, "lon": 77.4805},
    "201339": {"area": "Sector 39", "city": "Noida", "lat": 28.3613, "lon": 77.4889},
    "201340": {"area": "Sector 40", "city": "Noida", "lat": 28.3550, "lon": 77.4930},
    "201341": {"area": "Sector 41", "city": "Noida", "lat": 28.3486, "lon": 77.4970},
    "201345": {"area": "Sector 45", "city": "Noida", "lat": 28.3191, "lon": 77.5187},
    "201347": {"area": "Sector 47", "city": "Noida", "lat": 28.3064, "lon": 77.5281},
    "201350": {"area": "Sector 50", "city": "Noida", "lat": 28.2880, "lon": 77.5446},
    "201351": {"area": "Sector 51", "city": "Noida", "lat": 28.2816, "lon": 77.5487},
    "201352": {"area": "Sector 52", "city": "Noida", "lat": 28.2752, "lon": 77.5527},
    "201355": {"area": "Sector 55", "city": "Noida", "lat": 28.2568, "lon": 77.5686},
    "201356": {"area": "Sector 56", "city": "Noida", "lat": 28.2504, "lon": 77.5726},
    "201357": {"area": "Sector 57", "city": "Noida", "lat": 28.2439, "lon": 77.5766},
    "201362": {"area": "Sector 62", "city": "Noida", "lat": 28.2134, "lon": 77.6025},
    "201363": {"area": "Sector 63", "city": "Noida", "lat": 28.2069, "lon": 77.6065},
    
    # Gurugram Pincodes
    "122001": {"area": "Sector 1", "city": "Gurugram", "lat": 28.4089, "lon": 77.0266},
    "122005": {"area": "Sector 5", "city": "Gurugram", "lat": 28.3842, "lon": 77.0647},
    "122007": {"area": "Sector 7", "city": "Gurugram", "lat": 28.3689, "lon": 77.0886},
    "122008": {"area": "Sector 8", "city": "Gurugram", "lat": 28.3618, "lon": 77.1014},
    "122009": {"area": "Sector 9", "city": "Gurugram", "lat": 28.3548, "lon": 77.1142},
    "122010": {"area": "Sector 10", "city": "Gurugram", "lat": 28.3477, "lon": 77.1270},
    "122014": {"area": "Sector 14", "city": "Gurugram", "lat": 28.3153, "lon": 77.1802},
    "122015": {"area": "Sector 15", "city": "Gurugram", "lat": 28.3082, "lon": 77.1930},
    "122017": {"area": "Sector 17", "city": "Gurugram", "lat": 28.2941, "lon": 77.2186},
    "122018": {"area": "Sector 18", "city": "Gurugram", "lat": 28.2870, "lon": 77.2314},
    "122021": {"area": "Sector 21", "city": "Gurugram", "lat": 28.2657, "lon": 77.2754},
    "122022": {"area": "Sector 22", "city": "Gurugram", "lat": 28.2588, "lon": 77.2882},
    "122023": {"area": "Sector 23", "city": "Gurugram", "lat": 28.2517, "lon": 77.3010},
    "122025": {"area": "Sector 25", "city": "Gurugram", "lat": 28.2374, "lon": 77.3266},
    "122031": {"area": "Sector 31", "city": "Gurugram", "lat": 28.1975, "lon": 77.4034},
    "122032": {"area": "Sector 32", "city": "Gurugram", "lat": 28.1905, "lon": 77.4162},
    "122039": {"area": "Sector 39", "city": "Gurugram", "lat": 28.1428, "lon": 77.5134},
    "122040": {"area": "Sector 40", "city": "Gurugram", "lat": 28.1357, "lon": 77.5262},
    "122045": {"area": "Sector 45", "city": "Gurugram", "lat": 28.1014, "lon": 77.5946},
    "122047": {"area": "Sector 47", "city": "Gurugram", "lat": 28.0872, "lon": 77.6202},
    
    # Delhi Pincodes
    "110001": {"area": "New Delhi", "city": "Delhi", "lat": 28.7041, "lon": 77.2064},
    "110002": {"area": "Connaught Place", "city": "Delhi", "lat": 28.6296, "lon": 77.1946},
    "110006": {"area": "South Delhi", "city": "Delhi", "lat": 28.5244, "lon": 77.1855},
    "110092": {"area": "Connaught Place", "city": "Delhi", "lat": 28.6296, "lon": 77.1946},
    
    # Bangalore Pincodes
    "560034": {"area": "Koramangala", "city": "Bangalore", "lat": 12.9352, "lon": 77.6245},
    "560038": {"area": "Indiranagar", "city": "Bangalore", "lat": 12.9716, "lon": 77.6412},
    "560066": {"area": "Whitefield", "city": "Bangalore", "lat": 12.9698, "lon": 77.7499},
    "560001": {"area": "MG Road", "city": "Bangalore", "lat": 12.9716, "lon": 77.6245},
    "560041": {"area": "Jayanagar", "city": "Bangalore", "lat": 12.9352, "lon": 77.5945},
    
    # Mumbai Pincodes
    "400050": {"area": "Bandra", "city": "Mumbai", "lat": 19.0596, "lon": 72.8295},
    "400069": {"area": "Andheri", "city": "Mumbai", "lat": 19.1136, "lon": 72.8697},
    "400018": {"area": "Marine Drive", "city": "Mumbai", "lat": 18.9435, "lon": 72.8236},
    "400001": {"area": "Fort", "city": "Mumbai", "lat": 18.9406, "lon": 72.8355},
    "400076": {"area": "Powai", "city": "Mumbai", "lat": 19.1136, "lon": 72.9053},
}


def find_nearest_sectors(lat: float, lon: float, radius_km: float = 3.0) -> list:
    """
    Find all sectors/areas within a given radius (default 3km) from given coordinates.
    Returns list of sectors with distance information, sorted by distance.
    """
    import math
    
    def haversine_distance(lat1, lon1, lat2, lon2):
        """Calculate distance between two coordinates in kilometers"""
        R = 6371  # Earth's radius in km
        dlat = math.radians(lat2 - lat1)
        dlon = math.radians(lon2 - lon1)
        a = math.sin(dlat / 2) ** 2 + math.cos(math.radians(lat1)) * math.cos(math.radians(lat2)) * math.sin(dlon / 2) ** 2
        c = 2 * math.asin(math.sqrt(a))
        return R * c
    
    nearby_sectors = []
    
    for sector_key, sector_info in SECTOR_DATA.items():
        distance = haversine_distance(lat, lon, sector_info["lat"], sector_info["lon"])
        if distance <= radius_km:
            nearby_sectors.append({
                **sector_info,
                "distance_km": round(distance, 2),
                "sector_key": sector_key
            })
    
    # Sort by distance
    nearby_sectors.sort(key=lambda x: x["distance_km"])
    return nearby_sectors


def get_sector_from_pincode(pincode: str) -> dict:
    """
    Get sector/area information from a pincode.
    Returns sector details if found, otherwise None.
    """
    return PINCODE_TO_SECTOR.get(pincode, None)
